<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>MercadoShop | Compramos por ti</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
    --azul:#0d6efd;
    --verde:#25D366;
    --gris:#f4f6f9;
}
*{box-sizing:border-box;}
body{
    margin:0;
    font-family:'Segoe UI',Arial,sans-serif;
    background:var(--gris);
}

/* HEADER */
header{
    background:linear-gradient(135deg,#0d6efd,#084298);
    color:white;
    padding:12px 15px;
    display:flex;
    justify-content:space-between;
    align-items:center;
}
header h2{font-size:18px;}
.carrito-btn{
    background:white;
    color:#0d6efd;
    padding:6px 12px;
    border-radius:20px;
    font-weight:bold;
}

/* BUSCADOR */
.buscador{padding:10px;}
.buscador input{
    width:100%;
    padding:12px;
    border-radius:12px;
    border:1px solid #ccc;
    font-size:15px;
}

/* CARRUSEL */
.carrusel{
    margin:10px;
    border-radius:12px;
    overflow:hidden;
    position:relative;
    background:white;
}
.carrusel img{
    width:100%;
    height:180px;
    object-fit:contain;
    background:white;
    display:none;
}
.carrusel img.activo{display:block;}

.carrusel-btn{
    position:absolute;
    top:50%;
    transform:translateY(-50%);
    background:rgba(0,0,0,.4);
    color:white;
    border:none;
    font-size:20px;
    padding:5px 10px;
}
.prev{left:5px;}
.next{right:5px;}

/* INDICADORES */
.indicadores{
    display:flex;
    justify-content:center;
    gap:6px;
    position:absolute;
    bottom:8px;
    width:100%;
}
.indicadores span{
    width:8px;
    height:8px;
    background:#ccc;
    border-radius:50%;
}
.indicadores .activo{
    background:var(--azul);
}

/* CATEGORIAS */
.categorias{
    display:flex;
    gap:10px;
    overflow-x:auto;
    padding:10px;
}
.categorias button{
    flex:0 0 auto;
    padding:8px 14px;
    border:none;
    border-radius:20px;
    background:white;
    font-size:14px;
}

/* PRODUCTOS */
.container{padding:10px;}
.productos{
    display:grid;
    grid-template-columns:repeat(2,1fr);
    gap:10px;
}
.producto{
    background:white;
    border-radius:12px;
    padding:10px;
    box-shadow:0 2px 8px rgba(0,0,0,.1);
}
.producto img{
    width:100%;
    height:120px;
    object-fit:contain;
}
.producto h3{font-size:14px;margin:5px 0;}
.precio{color:var(--azul);font-weight:bold;font-size:15px;}

.btn{
    width:100%;
    padding:8px;
    border:none;
    border-radius:8px;
    font-size:13px;
    margin-top:4px;
}

/* BOTONES */
.btn-carrito{
    background:var(--azul);
    color:white;
    transition:.2s;
    position:relative;
    overflow:hidden;
}
.btn-carrito:active{transform:scale(0.9);}
.btn-pedir{background:var(--verde);color:white;}

/* EFECTO BURBUJA */
.burbuja{
    position:absolute;
    width:12px;
    height:12px;
    background:#fff;
    border-radius:50%;
    animation:volar .6s ease-out forwards;
}
@keyframes volar{
    from{transform:translateY(0);opacity:1;}
    to{transform:translateY(-40px);opacity:0;}
}

/* BADGE FLOTANTE */
.floating-cart{
    position:fixed;
    bottom:20px;
    right:20px;
    background:var(--azul);
    color:white;
    padding:14px;
    border-radius:50%;
    font-size:18px;
    z-index:200;
    box-shadow:0 4px 10px rgba(0,0,0,.3);
}

/* CARRITO */
#overlay{
    position:fixed;
    inset:0;
    background:rgba(0,0,0,.5);
    display:none;
    z-index:99;
}
#carrito{
    position:fixed;
    bottom:-100%;
    left:0;
    width:100%;
    height:85%;
    background:white;
    border-radius:20px 20px 0 0;
    padding:15px;
    transition:.4s;
    z-index:100;
    overflow-y:auto;
}
#carrito.activo{bottom:0;}

.carrito-item{
    border-bottom:1px solid #ddd;
    padding:8px 0;
}
.eliminar{color:red;font-size:13px;}

@media(min-width:768px){
    .productos{grid-template-columns:repeat(4,1fr);}
    .carrusel img{height:280px;}
}
</style>
</head>

<body>

<header>
    <h2>üõí MercadoShop</h2>
    <div class="carrito-btn" onclick="toggleCarrito()">üõç (<span id="contador">0</span>)</div>
</header>

<div class="buscador">
    <input type="text" placeholder="üîç Buscar productos...">
</div>

<div class="carrusel" id="carrusel">
    <img src="https://cdn-icons-png.flaticon.com/512/3081/3081559.png" class="activo">
    <img src="https://cdn-icons-png.flaticon.com/512/3144/3144456.png">
    <img src="https://cdn-icons-png.flaticon.com/512/891/891462.png">
    <button class="carrusel-btn prev" onclick="cambiar(-1)">‚óÄ</button>
    <button class="carrusel-btn next" onclick="cambiar(1)">‚ñ∂</button>
    <div class="indicadores" id="indicadores"></div>
</div>

<div class="categorias">
    <button onclick="filtrar('todos')">Todos</button>
    <button onclick="filtrar('electronica')">Electr√≥nica</button>
    <button onclick="filtrar('audio')">Audio</button>
</div>

<div class="container">
<div class="productos">
<div class="producto" data-cat="audio">
<img src="https://cdn-icons-png.flaticon.com/512/1048/1048953.png">
<h3>Aud√≠fonos Bluetooth</h3>
<p class="precio">$450</p>
<button class="btn btn-carrito" onclick="agregar('Aud√≠fonos Bluetooth',450,this)">Agregar</button>
<button class="btn btn-pedir" onclick="pedidoDirecto('Aud√≠fonos Bluetooth',450)">Pedir</button>
</div>

<div class="producto" data-cat="electronica">
<img src="https://cdn-icons-png.flaticon.com/512/847/847969.png">
<h3>Smartwatch</h3>
<p class="precio">$850</p>
<button class="btn btn-carrito" onclick="agregar('Smartwatch',850,this)">Agregar</button>
<button class="btn btn-pedir" onclick="pedidoDirecto('Smartwatch',850)">Pedir</button>
</div>
</div>
</div>

<div class="floating-cart" onclick="toggleCarrito()">üõí</div>

<div id="overlay" onclick="toggleCarrito()"></div>
<div id="carrito">
<h3>Tu carrito</h3>
<div id="lista"></div>
<p><strong>Total: $<span id="total">0</span></strong></p>
<button class="btn btn-pedir" onclick="enviarWhatsApp()">Pedir por WhatsApp</button>
</div>

<script>
let index=0,slides=document.querySelectorAll(".carrusel img");
const indicadores=document.getElementById("indicadores");

slides.forEach((_,i)=>{
    let s=document.createElement("span");
    if(i==0)s.classList.add("activo");
    indicadores.appendChild(s);
});

function actualizarIndicadores(){
    document.querySelectorAll(".indicadores span").forEach((p,i)=>{
        p.classList.toggle("activo",i==index);
    });
}

function cambiar(n){
    slides[index].classList.remove("activo");
    index=(index+n+slides.length)%slides.length;
    slides[index].classList.add("activo");
    actualizarIndicadores();
}
setInterval(()=>cambiar(1),4000);

let startX=0;
const carrusel=document.getElementById("carrusel");
carrusel.addEventListener("touchstart",e=>startX=e.touches[0].clientX);
carrusel.addEventListener("touchend",e=>{
    let endX=e.changedTouches[0].clientX;
    if(startX-endX>50)cambiar(1);
    if(endX-startX>50)cambiar(-1);
});

function filtrar(cat){
document.querySelectorAll(".producto").forEach(p=>{
p.style.display=(cat=="todos"||p.dataset.cat==cat)?"block":"none";
});
}

let carrito=[],total=0;
const carritoDiv=document.getElementById("carrito"),
overlay=document.getElementById("overlay"),
lista=document.getElementById("lista"),
totalSpan=document.getElementById("total"),
contador=document.getElementById("contador");

function toggleCarrito(){
carritoDiv.classList.toggle("activo");
overlay.style.display=carritoDiv.classList.contains("activo")?"block":"none";
}

function agregar(n,p,btn){
carrito.push({n,p});
total+=p;
actualizar();
efectoBoton(btn);
}

function efectoBoton(btn){
let b=document.createElement("span");
b.classList.add("burbuja");
btn.appendChild(b);
setTimeout(()=>b.remove(),600);
}

function actualizar(){
lista.innerHTML="";
carrito.forEach((x,i)=>{
lista.innerHTML+=`
<div class="carrito-item">
${x.n} - $${x.p}
<div class="eliminar" onclick="eliminar(${i})">Eliminar</div>
</div>`;
});
totalSpan.innerText=total;
contador.innerText=carrito.length;
}

function eliminar(i){
total-=carrito[i].p;
carrito.splice(i,1);
actualizar();
}

function enviarWhatsApp(){
let t="Hola quiero pedir:%0A";
carrito.forEach(x=>t+=`- ${x.n} $${x.p}%0A`);
window.open("https://wa.me/52TU_NUMERO?text="+t);
}

function pedidoDirecto(n,p){
window.open(`https://wa.me/52TU_NUMERO?text=Quiero pedir ${n} $${p}`);
}
</script>

</body>
</html>

